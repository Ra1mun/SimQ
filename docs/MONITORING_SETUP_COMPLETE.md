# üìä –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ SimQ!

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã –≤ `docker-compose.yml`:
- **Prometheus** - —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ (–ø–æ—Ä—Ç 9090)
- **Grafana** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–ø–æ—Ä—Ç 3002)
- **Node Exporter** - —ç–∫—Å–ø–æ—Ä—Ç—ë—Ä —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç—å) (–ø–æ—Ä—Ç 9100)
- **cAdvisor** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–ø–æ—Ä—Ç 8080)

### 2. –°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- `prometheus/prometheus.yml` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Prometheus —Å targets –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- `grafana/provisioning/datasources/prometheus.yml` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Prometheus
- `grafana/provisioning/dashboards/` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤

### 3. –°–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥:
- **"SimQ System Overview"** - –≥–æ—Ç–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏:
  - CPU Usage (%)
  - Memory Usage (%)
  - Disk Usage (%)
  - System Load
  - Container CPU Usage
  - Container Memory Usage

### 4. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `grafana/HOW_TO_CREATE_DASHBOARD.md` - –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞
- `grafana/QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ —à–ø–∞—Ä–≥–∞–ª–∫–∞
- `grafana/DASHBOARDS_SETUP.md` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤
- `grafana/README.md` - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üåê –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
|--------|-----|----------------|
| **Grafana** | http://localhost:3002 | admin / admin |
| **Prometheus** | http://localhost:9090 | - |
| **cAdvisor** | http://localhost:8080 | - |
| **Node Exporter** | http://localhost:9100/metrics | - |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã

```bash
docker-compose ps | Select-String -Pattern "grafana|prometheus|node-exporter|cadvisor"
```

–í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ **Up**.

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ Grafana

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: http://localhost:3002
2. –í–æ–π–¥–∏—Ç–µ: `admin` / `admin`
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å

### –®–∞–≥ 3: –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞: **Dashboards**
2. –ù–∞–π–¥–∏—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ: **"SimQ System Overview"**
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### –®–∞–≥ 4: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –î–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫:
1. Dashboards ‚Üí Import
2. –í–≤–µ–¥–∏—Ç–µ ID: **1860**
3. –í—ã–±–µ—Ä–∏—Ç–µ Prometheus ‚Üí Import

#### –î–ª—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
1. Dashboards ‚Üí Import
2. –í–≤–µ–¥–∏—Ç–µ ID: **193**
3. –í—ã–±–µ—Ä–∏—Ç–µ Prometheus ‚Üí Import

---

## üìä –ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (Node Exporter):

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **CPU Usage** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –≤ % |
| **Memory Usage** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ % |
| **Disk Usage** | –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –¥–∏—Å–∫–∞ –≤ % |
| **System Load** | –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã (1m, 5m, 15m) |
| **Network Traffic** | –í—Ö–æ–¥—è—â–∏–π/–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ |
| **Disk I/O** | –û–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫ |
| **Uptime** | –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã |

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (cAdvisor):

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **Container CPU** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∫–∞–∂–¥—ã–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º |
| **Container Memory** | –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ |
| **Container Network** | –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |
| **Container Count** | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |

---

## üìñ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –¥–∞—à–±–æ—Ä–¥

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª: **[grafana/HOW_TO_CREATE_DASHBOARD.md](grafana/HOW_TO_CREATE_DASHBOARD.md)**

–í –Ω—ë–º –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ:
- –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥ —Å –Ω—É–ª—è
- –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞–Ω–µ–ª–∏ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –ì–æ—Ç–æ–≤—ã–µ PromQL –∑–∞–ø—Ä–æ—Å—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –∞–ª–µ—Ä—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–º–ø–æ—Ä—Ç –≥–æ—Ç–æ–≤–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞
1. –ù–∞–π–¥–∏—Ç–µ –¥–∞—à–±–æ—Ä–¥ –Ω–∞ https://grafana.com/grafana/dashboards/
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ ID
3. Grafana ‚Üí Dashboards ‚Üí Import ‚Üí –≤–≤–µ–¥–∏—Ç–µ ID
4. –í—ã–±–µ—Ä–∏—Ç–µ Prometheus ‚Üí Import

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –≥–æ—Ç–æ–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã:

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|----------|----------|
| **1860** | Node Exporter Full | –ü–æ–ª–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã |
| **193** | Docker monitoring | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |
| **15282** | Host and Container Overview | –°–∏—Å—Ç–µ–º–∞ + –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã |
| **11074** | Node Exporter for Prometheus | –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| **19792** | Docker Dashboard | –î–µ—Ç–∞–ª—å–Ω—ã–π Docker |

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ PromQL –∑–∞–ø—Ä–æ—Å—ã

### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞–Ω–µ–ª–µ–π:

```promql
# CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (%)
100 - (avg by (instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)

# –ü–∞–º—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (%)
(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100

# –î–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (%)
100 - ((node_filesystem_avail_bytes{mountpoint="/"} * 100) / node_filesystem_size_bytes{mountpoint="/"})

# CPU –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (%)
sum(rate(container_cpu_usage_seconds_total{name!=""}[5m])) by (name) * 100

# –ü–∞–º—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (MB)
sum(container_memory_usage_bytes{name!=""}) by (name) / 1024 / 1024

# TOP 5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø–æ CPU
topk(5, sum(rate(container_cpu_usage_seconds_total{name!=""}[5m])) by (name))
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Grafana

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
GRAFANA_ADMIN_USER=–≤–∞—à_–ª–æ–≥–∏–Ω
GRAFANA_ADMIN_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
docker-compose restart grafana
```

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ `prometheus/prometheus.yml`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π job –≤ —Å–µ–∫—Ü–∏—é `scrape_configs`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Prometheus:
   ```bash
   docker-compose restart prometheus
   ```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å targets –≤ Prometheus:
–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:9090/targets

–í—Å–µ targets –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ **UP** (–∑–µ–ª–µ–Ω—ã–µ).

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
docker-compose ps | Select-String -Pattern "grafana|prometheus|node-exporter|cadvisor"
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
```bash
docker logs grafana --tail 50
docker logs prometheus --tail 50
docker logs node-exporter --tail 20
docker logs cadvisor --tail 20
```

---

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ targets**: http://localhost:9090/targets (–≤—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å UP)
2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ Explore**: Grafana ‚Üí Explore ‚Üí –∑–∞–ø—Ä–æ—Å `up`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: `docker-compose ps`

### Node Exporter –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSL2 + Docker Desktop
- Node Exporter –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ Windows
- –õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ WSL2 –∏–ª–∏ –Ω–∞ Linux

### cAdvisor –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ**: –í–∫–ª—é—á–∏—Ç–µ WSL2 backend –≤ Docker Desktop
- Settings ‚Üí General ‚Üí Use WSL2 based engine
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **[HOW_TO_CREATE_DASHBOARD.md](grafana/HOW_TO_CREATE_DASHBOARD.md)** | –ü–æ—à–∞–≥–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞ |
| **[QUICKSTART.md](grafana/QUICKSTART.md)** | –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ —à–ø–∞—Ä–≥–∞–ª–∫–∞ |
| **[DASHBOARDS_SETUP.md](grafana/DASHBOARDS_SETUP.md)** | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |
| **[README.md](grafana/README.md)** | –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Grafana |

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ Grafana: http://localhost:3002
2. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥ "SimQ System Overview"
3. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ ID 1860 –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã
4. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ ID 193 –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Docker
5. ‚úÖ –ò–∑—É—á–∏—Ç–µ PromQL –∑–∞–ø—Ä–æ—Å—ã
6. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –¥–∞—à–±–æ—Ä–¥ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

---

**–£–¥–∞—á–∏ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ! üöÄ**
